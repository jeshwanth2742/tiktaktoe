<!DOCTYPE html>
<html>
<head>
  <title>Tic Tac Toe</title>
  <style>
    body { text-align: center; font-family: Arial; }
    .board { display: grid; grid-template-columns: repeat(3,100px); margin: 20px auto; }
    .cell { width:100px; height:100px; border:1px solid black; display:flex; align-items:center; justify-content:center; font-size:2em; cursor:pointer; }
  </style>
</head>
<body>
  <h1>Tic Tac Toe</h1>
  <div class="board" id="board"></div>
  <h2 id="status"></h2>

  <script>
    let board = Array(9).fill("");

    function renderBoard() {
      const b = document.getElementById("board");
      b.innerHTML = "";
      board.forEach((val, idx) => {
        let cell = document.createElement("div");
        cell.className = "cell";
        cell.textContent = val;
        cell.onclick = () => makeMove(idx);
        b.appendChild(cell);
      });
    }

    async function makeMove(pos) {
      const res = await fetch("/move", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ pos })
      });
      const data = await res.json();
      board = data.board;
      renderBoard();
      if (data.winner) document.getElementById("status").innerText = "Winner: " + data.winner;
    }

    renderBoard();
  </script>
</body>
</html>
